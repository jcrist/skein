
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Web UI &#8212; Skein 0.5.0+1.gf5777bb documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Recipes" href="recipes.html" />
    <link rel="prev" title="Key-Value Store" href="key-value-store.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="web-ui">
<h1>Web UI<a class="headerlink" href="#web-ui" title="Permalink to this headline">¶</a></h1>
<p>Skein comes with an informative Web UI. This displays information on:</p>
<ul class="simple">
<li>What services are currently running in the application</li>
<li>Status of all current and past containers</li>
<li>Live links to logs for each service</li>
<li>Key-value pairs in the <a class="reference external" href="key-value-store.html">Key-Value Store</a></li>
</ul>
<p>As well as links to user registered pages.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#the-overview-page" id="id1">The Overview Page</a></li>
<li><a class="reference internal" href="#the-key-value-page" id="id2">The Key/Value Page</a></li>
<li><a class="reference internal" href="#custom-pages" id="id3">Custom Pages</a><ul>
<li><a class="reference internal" href="#bokeh-dashboard-example" id="id4">Bokeh Dashboard Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security" id="id5">Security</a></li>
</ul>
</div>
<p>The Skein Web UI is usually accessed through the YARN Resource Manager Web UI.</p>
<a class="light-bordered-image reference internal image-reference" href="_images/yarn-resourcemanager-webui-link.png"><img alt="Link to the Skein Web UI from the YARN Resource Manager Web UI." class="light-bordered-image align-center" src="_images/yarn-resourcemanager-webui-link.png" style="width: 90%;" /></a>
<p>The address can also be obtained programatically through the
<a class="reference internal" href="api.html#skein.ui.WebUI" title="skein.ui.WebUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">skein.ui.WebUI</span></code></a> object (found at <a class="reference internal" href="api.html#skein.ApplicationClient.ui" title="skein.ApplicationClient.ui"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ApplicationClient.ui</span></code></a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;http://master.example.com:8088/proxy/application_1539033277709_0001/&#39;</span>
</pre></div>
</div>
<div class="section" id="the-overview-page">
<h2><a class="toc-backref" href="#id1">The Overview Page</a><a class="headerlink" href="#the-overview-page" title="Permalink to this headline">¶</a></h2>
<p>The Overview page presents a summary view of the application and its contained
services. Information contained here includes:</p>
<ul class="simple">
<li>The application name, ID, and user</li>
<li>Links to the Application Master and Application Driver logs (if relevant)</li>
<li>Total memory and cores allocated for this application</li>
<li>Total runtime</li>
<li>Application progress (if set by the application)</li>
<li>A summary of the application services</li>
</ul>
<a class="light-bordered-image reference internal image-reference" href="_images/webui-overview-closed.png"><img alt="Overview page, accordion closed" class="light-bordered-image align-center" src="_images/webui-overview-closed.png" style="width: 90%;" /></a>
<p>Here we have two services - <code class="docutils literal notranslate"><span class="pre">my-first-service</span></code> and <code class="docutils literal notranslate"><span class="pre">my-second-service</span></code>. The
icons in each row indicate for each service (in order):</p>
<ul class="simple">
<li>How many containers are currently running</li>
<li>How many containers succeeded (exit code of 0)</li>
<li>How many containers were killed (stopped by the user)</li>
<li>How many containers have failed (non-zero exit code)</li>
</ul>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">my-first-service</span></code> has 2 containers running, 1 container
succeeded, 1 container killed, and 1 container failed.</p>
<p>Opening the accordion for the service displays three tables, summarizing all
pending, running, and completed containers.</p>
<a class="light-bordered-image reference internal image-reference" href="_images/webui-overview-open.png"><img alt="Overview page, accordion open" class="light-bordered-image align-center" src="_images/webui-overview-open.png" style="width: 90%;" /></a>
<p>If applicable, links to the live logs for each container are provided, as well
as their current status and total runtime.</p>
</div>
<div class="section" id="the-key-value-page">
<h2><a class="toc-backref" href="#id2">The Key/Value Page</a><a class="headerlink" href="#the-key-value-page" title="Permalink to this headline">¶</a></h2>
<p>The Key/Value page contains information on all key-value pairs currently set in
the <a class="reference external" href="key-value-store.html">Key-Value Store</a>. This can be useful for
debugging applications. Note that if a value is not UTF-8 encodable it is
displayed as <code class="docutils literal notranslate"><span class="pre">&lt;binary</span> <span class="pre">value&gt;</span></code>.</p>
<a class="light-bordered-image reference internal image-reference" href="_images/webui-key-value.png"><img alt="Key/Value page" class="light-bordered-image align-center" src="_images/webui-key-value.png" style="width: 90%;" /></a>
</div>
<div class="section" id="custom-pages">
<h2><a class="toc-backref" href="#id3">Custom Pages</a><a class="headerlink" href="#custom-pages" title="Permalink to this headline">¶</a></h2>
<p>Applications can register additional pages in the Web UI, which are available
through the “Service Pages” dropdown. This can be useful for providing
application specific dashboards.</p>
<p>Custom pages can be added with <code class="xref py py-func docutils literal notranslate"><span class="pre">WebUI.add_page()</span></code>, removed with
<code class="xref py py-func docutils literal notranslate"><span class="pre">WebUI.remove_page()</span></code>, and queried with <code class="xref py py-func docutils literal notranslate"><span class="pre">WebUI.get_pages()</span></code>.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api.html#skein.ui.WebUI.add_page" title="skein.ui.WebUI.add_page"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WebUI.add_page</span></code></a>(route,&nbsp;target[,&nbsp;link_name])</td>
<td>Add a new proxied page to the Web UI.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api.html#skein.ui.WebUI.remove_page" title="skein.ui.WebUI.remove_page"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WebUI.remove_page</span></code></a>(route)</td>
<td>Remove a proxied page from the Web UI.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api.html#skein.ui.WebUI.get_pages" title="skein.ui.WebUI.get_pages"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WebUI.get_pages</span></code></a>()</td>
<td>Get all registered pages.</td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adds a page at &lt;address_to_web_ui&gt;/pages/custom</span>
<span class="c1"># The link in the dropdown will be &quot;My Custom Page&quot;</span>
<span class="n">app</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">add_page</span><span class="p">(</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="n">my_custom_page_address</span><span class="p">,</span> <span class="n">link_name</span><span class="o">=</span><span class="s1">&#39;My Custom Page&#39;</span><span class="p">)</span>

<span class="c1"># Get a map of all registered pages</span>
<span class="n">app</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">get_pages</span><span class="p">()</span>

<span class="c1"># Remove the page with the route `custom`</span>
<span class="n">app</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">remove_page</span><span class="p">(</span><span class="s1">&#39;custom&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that due to limitations in the <a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/WebApplicationProxy.html">YARN web application proxy</a>,
only <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests can be successfully proxied through in most deployments
(support for <code class="docutils literal notranslate"><span class="pre">PUT</span></code> requests was added in Hadoop 3). This means that modern
web components like websockets won’t work, nor will many RESTful web apps. Even
so, useful web pages can still be supported.</p>
<div class="section" id="bokeh-dashboard-example">
<h3><a class="toc-backref" href="#id4">Bokeh Dashboard Example</a><a class="headerlink" href="#bokeh-dashboard-example" title="Permalink to this headline">¶</a></h3>
<p>An example dashboard with live updates using <a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a> is available <a class="reference external" href="https://github.com/jcrist/skein/tree/master/examples/pricing_dashboard">here</a>.</p>
<p>A few high level notes:</p>
<ul>
<li><p class="first">Since the YARN web application proxy doesn’t support websockets, we use an
<a class="reference external" href="https://bokeh.pydata.org/en/latest/docs/reference/models/sources.html#bokeh.models.sources.AjaxDataSource">AjaxDataSource</a>.
This is less efficient than a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> (which uses websockets),
as it requires polling the server to get updates. For small amounts of data
though this is sufficient and fine.</p>
</li>
<li><p class="first">We choose a dynamic port, as we can’t know for sure what ports will be
available on the deployed container.</p>
</li>
<li><p class="first">The only Skein-specific bit is where <a class="reference external" href="https://github.com/jcrist/skein/blob/master/examples/pricing_dashboard/dashboard.py#L242-L246">the page is registered with the
application</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register the page with the Skein Web UI.</span>
<span class="c1"># This is the only Skein-specific bit</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">skein</span><span class="o">.</span><span class="n">ApplicationClient</span><span class="o">.</span><span class="n">from_current</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">add_page</span><span class="p">(</span><span class="s1">&#39;price-dashboard&#39;</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">link_name</span><span class="o">=</span><span class="s1">&#39;Price Dashboard&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>The deployed page looks like:</p>
<a class="light-bordered-image reference internal image-reference" href="_images/pricing-dashboard.gif"><img alt="An example bokeh dashboard deployed using Skein" class="light-bordered-image align-center" src="_images/pricing-dashboard.gif" style="width: 90%;" /></a>
</div>
</div>
<div class="section" id="security">
<h2><a class="toc-backref" href="#id5">Security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<p>YARN handles authentication but not authorization for application web pages. As
such, users accessing the pages must successfully authenticate with YARN
(either using kerberos or “simple” authentication, depending on cluster
configuration). However, by default any successfully authenticated user will
have access to the Skein Web UI.</p>
<p>If this is undesired, you’ll need to configure security using <a class="reference internal" href="specification.html#specification-acls"><span class="std std-ref">Access
Control Lists (ACLs)</span></a>. The simplest version disables
access to the Web UI for everyone but the application owner:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>acls:
  enable: true

...
</pre></div>
</div>
<p>All requests to the Web UI are authenticated by YARN and authorized by Skein
against the specified ACLs. This goes both for requests made from outside the
cluster (through the YARN web ui) and inside the cluster with direct access to
the Web UI (this is due to YARN’s provided <a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/YarnApplicationSecurity.html#Securing_YARN_Application_Web_UIs_and_REST_APIs">security filter</a>).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>While the <em>Skein</em> Web UI is secured against both external and internal
access by the YARN security filter, <a class="reference internal" href="#custom-pages">Custom Pages</a> are currently only
secured against access from outside the cluster (i.e. through the YARN Web
UI). Users with SSH access to the cluster and knowledge of the internal
address/ports used for custom web pages will currently have unrestricted
access to these custom pages.</p>
<p class="last">This is fixable, but deemed lower priority, as it’s only an issue in the
case of malicious users that already have direct access to the cluster. If
this is a problem for you, please let us know by <a class="reference external" href="https://github.com/jcrist/skein/issues">filing an issue</a>.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A tool and library for easily deploying applications on Apache YARN</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jcrist&repo=skein&type=watch&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/jcrist/skein">
    <img
        alt="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
        src="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="specification.html">Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributing-files.html">Distributing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="key-value-store.html">Key-Value Store</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Web UI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-overview-page">The Overview Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-key-value-page">The Key/Value Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-pages">Custom Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#security">Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Development</a></li>
</ul>

<h3>Need help?</h3>

<p>
  Open an issue in the <a href="https://github.com/jcrist/skein/issues">issue tracker</a>.
</p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Jim Crist.
      
      |
      <a href="_sources/web-ui.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Quickstart &#8212; Skein 0.5.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Specification" href="specification.html" />
    <link rel="prev" title="Skein" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>First make sure that <a class="reference external" href="index.html#installation">Skein is installed</a>.</p>
<p>Skein is intended to be used either as a command-line application or
programmatically using the Python API. This document provides a brief example
using the command-line – for more information please see the <a class="reference external" href="api.html">API</a> or <a class="reference external" href="cli.html">CLI</a> documentation.</p>
<div class="section" id="kinit-optional">
<span id="quickstart-kinit"></span><h2>Kinit (optional)<a class="headerlink" href="#kinit-optional" title="Permalink to this headline">¶</a></h2>
<p>If your system is configured to use Kerberos for authentication, you need to
make sure you have an active ticket-granting-ticket before continuing:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ kinit
</pre></div>
</div>
</div>
<div class="section" id="start-the-skein-driver-optional">
<span id="quickstart-skein-driver"></span><h2>Start the Skein Driver (optional)<a class="headerlink" href="#start-the-skein-driver-optional" title="Permalink to this headline">¶</a></h2>
<p>To communicate with the YARN Resource manager, Skein uses a background driver
process written in Java. Since this process can be slow to start, sometimes it
can be nice to start it once and have it persist through all CLI calls. This
may look like:</p>
<ol class="arabic simple">
<li>Start the Skein driver</li>
<li>Run yarn application/applications</li>
<li>Shut down the Skein driver</li>
</ol>
<p>To do this from the command-line, use <a class="reference external" href="cli.html#skein-driver-start">skein driver start</a>:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein driver start
localhost:12345
</pre></div>
</div>
<p>Note that if you don’t start the driver process, one will be started for you,
but not persisted between calls.</p>
</div>
<div class="section" id="write-an-application-specification">
<h2>Write an Application Specification<a class="headerlink" href="#write-an-application-specification" title="Permalink to this headline">¶</a></h2>
<p>Skein applications are written declaratively as specifications. These can be
provided as YAML or JSON files, or created programmatically using the
<a class="reference external" href="api.html#application-specification">specification api</a>. For more
information, see the <a class="reference external" href="specification.html">specification docs</a>.</p>
<p>Here we create a simple “Hello World” application as a YAML file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hello_world</span>
<span class="nt">queue</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>

<span class="nt">master</span><span class="p">:</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">vcores</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512 MiB</span>
  <span class="nt">script</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">sleep 60</span>
    <span class="no">echo &quot;Hello World!&quot;</span>
</pre></div>
</div>
<p>Walking through this specification:</p>
<ul>
<li><p class="first">The application name is specified as <code class="docutils literal notranslate"><span class="pre">hello_world</span></code>, and will be deployed in
the YARN queue <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hello_world</span>
<span class="nt">queue</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
</pre></div>
</div>
</li>
<li><p class="first">The application requests a single container for the <em>Application Master</em> with
1 virtual core and 512 MiB of memory.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">master</span><span class="p">:</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">vcores</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512 MiB</span>
</pre></div>
</div>
</li>
<li><p class="first">The Application Master then runs a bash script. Both <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and
<code class="docutils literal notranslate"><span class="pre">stderr</span></code> of this script will be written to the container logs.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
  <span class="nt">script</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">sleep 60</span>
    <span class="no">echo &quot;Hello World!&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="submit-the-application">
<h2>Submit the Application<a class="headerlink" href="#submit-the-application" title="Permalink to this headline">¶</a></h2>
<p>Applications are submitted to be run on the cluster using the <a class="reference external" href="cli.html#skein-application-submit">skein
application submit</a> command:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein application submit hello_world.yaml
application_1526497750451_0009
</pre></div>
</div>
<p>This uploads any necessary files to HDFS, and submits the application to the
YARN scheduler. Depending on current cluster usage this could start immediately
or at a later time. The command outputs the Application ID, which is needed for
subsequent commands.</p>
</div>
<div class="section" id="query-existing-applications">
<h2>Query existing applications<a class="headerlink" href="#query-existing-applications" title="Permalink to this headline">¶</a></h2>
<p>As YARN processes applications, they work through several states, enumerated by
<a class="reference internal" href="api.html#skein.model.ApplicationState" title="skein.model.ApplicationState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ApplicationState</span></code></a>. The status of all Skein applications
can be queried using the <a class="reference external" href="cli.html#skein-application-ls">skein application ls</a> command. By default this shows all
applications that are either <code class="docutils literal notranslate"><span class="pre">SUBMITTED</span></code>, <code class="docutils literal notranslate"><span class="pre">ACCEPTED</span></code>, or <code class="docutils literal notranslate"><span class="pre">RUNNING</span></code>.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein application ls
APPLICATION_ID                    NAME           STATE      STATUS       CONTAINERS    VCORES    MEMORY
application_1526497750451_0009    hello_world    RUNNING    UNDEFINED    1             1         512
</pre></div>
</div>
<p>You can also filter by application state. Here we show all <code class="docutils literal notranslate"><span class="pre">KILLED</span></code> and <code class="docutils literal notranslate"><span class="pre">FAILED</span></code> applications:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein application ls -s KILLED -s FAILED
APPLICATION_ID                    NAME           STATE     STATUS    CONTAINERS    VCORES    MEMORY
application_1526497750451_0002    hello_world    KILLED    KILLED    0             0         0
application_1526497750451_0004    hello_world    KILLED    KILLED    0             0         0
application_1526497750451_0005    hello_world    FAILED    FAILED    0             0         0
</pre></div>
</div>
<p>To get the status of a specific application, use the <a class="reference external" href="cli.html#skein-application-status">skein application status</a> command:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein application status application_1526497750451_0009
APPLICATION_ID                    NAME           STATE      STATUS       CONTAINERS    VCORES    MEMORY
application_1526497750451_0009    hello_world    RUNNING    UNDEFINED    1             1         512
</pre></div>
</div>
</div>
<div class="section" id="kill-a-running-application">
<h2>Kill a running application<a class="headerlink" href="#kill-a-running-application" title="Permalink to this headline">¶</a></h2>
<p>By default, applications shutdown once all of their containers have exited <em>or</em>
any containers exits with a non-zero exit code. To explicitly kill an
application, use the <a class="reference external" href="cli.html#skein-application-kill">skein application kill</a> command:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein application kill application_1526497750451_0009

# See that the application was killed
$ skein application status application_1526497750451_0009
APPLICATION_ID                    NAME           STATE     STATUS    CONTAINERS    VCORES    MEMORY
application_1526497750451_0009    hello_world    KILLED    KILLED    0             0         0
</pre></div>
</div>
</div>
<div class="section" id="stop-the-skein-driver-optional">
<h2>Stop the Skein Driver (optional)<a class="headerlink" href="#stop-the-skein-driver-optional" title="Permalink to this headline">¶</a></h2>
<p>If you started the Driver process (see <a class="reference internal" href="#start-the-skein-driver-optional">Start the Skein Driver (optional)</a>
above), you’ll probably want to shut it down when you’re done.  This isn’t
strictly necessary (the driver can run for long periods), but helps keep
resource usage on the edge node low.</p>
<p>To do this from the command-line, use <a class="reference external" href="cli.html#skein-driver-stop">skein driver stop</a>.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ skein driver stop
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A tool and library for easily deploying applications on Apache YARN</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jcrist&repo=skein&type=watch&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/jcrist/skein">
    <img
        alt="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
        src="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kinit-optional">Kinit (optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-the-skein-driver-optional">Start the Skein Driver (optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-an-application-specification">Write an Application Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submit-the-application">Submit the Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#query-existing-applications">Query existing applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kill-a-running-application">Kill a running application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stop-the-skein-driver-optional">Stop the Skein Driver (optional)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="specification.html">Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributing-files.html">Distributing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="key-value-store.html">Key-Value Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="web-ui.html">Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Development</a></li>
</ul>

<h3>Need help?</h3>

<p>
  Open an issue in the <a href="https://github.com/jcrist/skein/issues">issue tracker</a>.
</p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Jim Crist.
      
      |
      <a href="_sources/quickstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>